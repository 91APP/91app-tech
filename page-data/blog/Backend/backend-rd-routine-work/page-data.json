{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/blog/Backend/backend-rd-routine-work","result":{"data":{"markdownRemark":{"html":"<p>本文跟大家分享的主題是 <code>Backend RD 的日常</code>，身為大型電子商務系統的後端工程師平時究竟都在做些什麼樣的工作呢？軟體開發工程師只要寫寫程式碼就好了嗎？我們是不是應該更宏觀的來看待整個產品生產的過程。</p>\n<!--more-->\n<p>今天的大綱分為三個部分，分別是：</p>\n<ul>\n<li>怎麼讓 Code Review 的效率提升？</li>\n<li>如何使程式碼更健康？(Unit Test)</li>\n<li>面臨多個環境的 Deploy 情境怎麼做？</li>\n</ul>\n<p>上述這三個環節是開發人員從開始提交程式碼異動一路到部署至正式環境的過程，其中都有一些我們逐步累積的經驗與成果要跟大家分享。以前的我們只要關心功能開發，專注在程式碼相關的問題，現在的我們則是從需求一路到交付、維運都與我們息息相關，密不可分。</p>\n<hr>\n<h1 id=\"怎麼讓-code-review-的效率提升？\" style=\"position:relative;\"><a href=\"#%E6%80%8E%E9%BA%BC%E8%AE%93-code-review-%E7%9A%84%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87%EF%BC%9F\" aria-label=\"怎麼讓 code review 的效率提升？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>怎麼讓 Code Review 的效率提升？</h1>\n<p>首先我們來聊聊關於提交程式碼異動後會發生的事 - Code Review。程式碼審查通常會需要一些作業時間，怎麼讓審查的時間縮短、效率提升？</p>\n<h2 id=\"git-flow\" style=\"position:relative;\"><a href=\"#git-flow\" aria-label=\"git flow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Git Flow</h2>\n<p>在講到程式碼審查之前，先聊聊我們是如何在 Git 上作業的。一開始先簡要的說明我們所使用的 Git 分支策略 Git Flow。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/33d1d/GitFlow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.51533742331287%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAAsSAAALEgHS3X78AAAD9klEQVQ4y11VW3OiWBD2/7/tX9iHqZrdquwk2ZlJ3IoZYxKvRIyggIiCGBFQ7he5uR+ciU6mH6i2T9/767Z2fKc4jjebTZ7naZoGQQCJ6zqiKBZFkWWZZVn4gg/DEDrEpAbO8zxwURRpmgYN/FytVnkONj8cDsQY7sBAeatpCPPTGDYcx0FK3ohX8OT5NyZJ07WuwyN8ua5bG41G2+0WDxClFcFJGHqHQ0KUoihEzoZhREGw2Vt/v7yyLNN6eBgMBjWe52VZfjeG6/wQ28P+hbmz4Bt+TdN0HAe1ICm7IghpmoZhDQWQyLvdTlVVw9h5jjF5rZNsdV1XFGW5XMAGSUEHjk611NCkfq8HNxOWbf74MWZYzzWF6QN5Rv8fQa3WviLf9/Et3qn29vbWaDQ6nY5p7ybTCfUy3Gry5PUmig6II0nS09MTFJaKQjJHFaS7pTFELMu+aZtZi5ZYgepSiwXHMXeLhfzX58/Pz89qRe3GfZokyCVwf0kbmYgzEdz4gVrSvNBjooO7nPd4YSbw/HQ6DdFu3+fqDceyZFXt84JtWUgK/S8jQwPGUnMsU4JCi/kxofrN1UrFnEzTIJCKEbYoFG37leFYhrm9uUE5NcyDnUxg7MXBilsoIyk/Biz9b5oVZOwkQ2CpqGCUBD46j16s1+vSmGEYPDueq44lucNp5lZezCHJS4iW4MVEUDZAg0ZZtn2uGW+YEzho7EzTc0NFno5fLoIgdhzbi1xA6P7+vtNuIyDULOuXUSGyIAgY/YimB/0+pg2CozzL5wuxPrgCGB9AzSaaRGBzjgzcIm1DN+4ad9fX1427hiQBT25ZZxw2X+pJmqBzUCObA80Pac+EGTjqqbeQpI2+9VxrPHq09vZW17psC1lgHCiNYONDZHiVl0tw4n+0p5qbmbrV5WHv4nDIgtBrDL8hbaTT7XbJtsL4fAwwAzS9hE4caktVGIzTAtvjl5Iw6L4+Zlk5rSRJSEC07bTztSgMcTfKNrqOykpqb5Yds7nIu47Li3xrWvd8DwGwsCQaFuMcGd2eVCDBnNczWR7Nk8zutf7khfkLRZm6CYQBwlgvxAx8f6frWUXAz9nYdPbabLUeiOkxCwMfa3x7e4t9Ot0ZXMaJJH3qD3mOoygK96A0JiAZXzy5pu0ErqKsDGM/n4uXl5dX11ekKLJSODTafg+/APZwOCznDAiU2DZsz3F9P+y2G4P2J3o0/vLln+9fb7Dwp4ahWqs6Bj9rPt3t4v1ExlGo62vfD3qD7vcuZhaTq0pePzTsbFwd33JC/r79eGFZju3YqinjyCE7QAVtw9+AXFXxu/GJsjTUNwz26ey3SjhLEl6S/mh1inf5/54j0+Z4U0Z5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitFlow\"\n        title=\"GitFlow\"\n        src=\"/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/a6d36/GitFlow.png\"\n        srcset=\"/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/222b7/GitFlow.png 163w,\n/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/ff46a/GitFlow.png 325w,\n/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/a6d36/GitFlow.png 650w,\n/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/e548f/GitFlow.png 975w,\n/static/f3ecc3cf5b3902dbb1ff2356fe65e67e/33d1d/GitFlow.png 1150w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如果有在關注 Git 領域相關資訊的人，這張 Git Flow 分支的示意圖相信對你並不陌生，Git Flow 中常見的幾個主要分支分別是：</p>\n<ul>\n<li>master 分支我們用來部署在正式環境</li>\n<li>develop 分支用來部署在測試環境，並整合所有 feature 分支的異動</li>\n<li>feature 分支作為開發提交新的異動，是開發人員最常使用的分支</li>\n<li>release 分支在正式部署前的 Pre Production 環境部署測試，在準備部署到正式環境前會由 develop 分支來建立 release 分支</li>\n<li>hotfix 分支則用來快速修復正式環境的線上問題所使用</li>\n</ul>\n<p>以上就是 Git Flow 當中幾個重要的分支。</p>\n<h2 id=\"github-flow\" style=\"position:relative;\"><a href=\"#github-flow\" aria-label=\"github flow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub Flow</h2>\n<p>講完了 Git Flow 後，接著要介紹的是 GitHub Flow 的部分，其中幾個主要的階段如下圖所示：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0343cf3c175df2dd333d10397f0d12a6/161ec/GitHubFlow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.423312883435585%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAAA6UlEQVQY01VPQU7EMAzs/x/EmSMnxErANgWxUdUWDu2SbpKmTuwEt5FC17Ki8diecaqYknahm5wFTCnFuGUJ2gs6kLMN/bTYNTBTZYrR1cC8BGW9MmBiujw154fn0ZEy/lutzL9I1U0LOxXpqiCkuHpiSU5IqT/Jr8dXBuMNjAsOsO71VfvdKf4vM6bDrcezs+g9sQ3Hssxf8hhLAwIxCM4vv5YBeKK9uQbKOjycmYpVEJEQs1wuGbhxVpefzZm7RHfOe2zLzjkhRNM0Whuup3E81zUCBPGObyfVdeLzQ0pZpPlt23YYBgZ/rDmXRDP5o2oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHubFlow\"\n        title=\"GitHubFlow\"\n        src=\"/static/0343cf3c175df2dd333d10397f0d12a6/a6d36/GitHubFlow.png\"\n        srcset=\"/static/0343cf3c175df2dd333d10397f0d12a6/222b7/GitHubFlow.png 163w,\n/static/0343cf3c175df2dd333d10397f0d12a6/ff46a/GitHubFlow.png 325w,\n/static/0343cf3c175df2dd333d10397f0d12a6/a6d36/GitHubFlow.png 650w,\n/static/0343cf3c175df2dd333d10397f0d12a6/e548f/GitHubFlow.png 975w,\n/static/0343cf3c175df2dd333d10397f0d12a6/3c492/GitHubFlow.png 1300w,\n/static/0343cf3c175df2dd333d10397f0d12a6/161ec/GitHubFlow.png 1840w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Create Branch 開發人員在開始異動前先由 develop 分支建立新的 feature 分支</li>\n<li>Commits 在 feature 分支進行開發並提交程式碼異動</li>\n<li>Pull Request 將異動提交合併請求</li>\n<li>Code Review 由審查人員進行程式碼審查並給予開發人員修正建議</li>\n<li>Merge 直到審查通過後才合併回到 develop 分支</li>\n</ul>\n<p>這就是 GitHub Flow 中主要的幾個步驟。</p>\n<h2 id=\"提交程式碼-pull-reqeust\" style=\"position:relative;\"><a href=\"#%E6%8F%90%E4%BA%A4%E7%A8%8B%E5%BC%8F%E7%A2%BC-pull-reqeust\" aria-label=\"提交程式碼 pull reqeust permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>提交程式碼 (Pull Reqeust)</h2>\n<p>接下來要說明的是 Pull Request，我們平日的作業情境就是將 Git Flow 與 GitHub Flow 合並來運用：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1653eae2527e5f5d77aaa76818f12b38/1e2b7/PullRequest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.668711656441715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAAB8UlEQVQoz31SzYrUQBDOe4nCHgQfYp9CwYMgyIriSRCP/u0+gDdhQVbE2+Cgy85kJ5lJMkl3fjrpzn8y6XSSzthJHNmDWtDp6u76qurLV9J+tL7vxaoZK4pi8P9t/WgVpWmaStOhbduu6/ww8oPgEPUXGOe8Hc1GPsZYagZju90ujEJaVVPZP8XHzIMjYFNklmVJkjSMiRuJNW2WIABMTVF9QjzPnmBEdSLDn3zRFKU1pVUSu9pGg6bpBBgCIOmavtVlACxRtigrnDQ5389Pv57dO/lw98ny40whe5dQBwJD03VtIboVkYKzSCoZP9SYeFme2iKhVx6/Do9fBU9vPft8/92Xh6cnd14cPY8enBF9vbWXWpaTMAwhhIL2APagi5FrwI3twF3FVmZq5/tvLz+9vf3o/dHj2ZuLGeitgOVZ6liQEKQYMiGEjbpIy8UixL7jg7IsSJwQPPDsmnZz/lO/uOJtN9EGlrVWlDjGdgAEfzfACCEJGx7x3fn8u/grWVF2fJK8vyHP4EQkioC/3aqrlSLe07Ic2o4QgZZ+JV8KGUpKOe8nkKg5lD1kiYWSCCvKQjc1Qbig9QBuaFPTnPPuP1PFe54laceaui5u3kti5Xm+Xm9+tzp+W+QyVa4v563rHGZl2C1gydfXIn6cwP4XV2+YvT/4KK4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PullRequest\"\n        title=\"PullRequest\"\n        src=\"/static/1653eae2527e5f5d77aaa76818f12b38/a6d36/PullRequest.png\"\n        srcset=\"/static/1653eae2527e5f5d77aaa76818f12b38/222b7/PullRequest.png 163w,\n/static/1653eae2527e5f5d77aaa76818f12b38/ff46a/PullRequest.png 325w,\n/static/1653eae2527e5f5d77aaa76818f12b38/a6d36/PullRequest.png 650w,\n/static/1653eae2527e5f5d77aaa76818f12b38/e548f/PullRequest.png 975w,\n/static/1653eae2527e5f5d77aaa76818f12b38/3c492/PullRequest.png 1300w,\n/static/1653eae2527e5f5d77aaa76818f12b38/1e2b7/PullRequest.png 1483w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>首先 origin 是開發人員自己的儲存庫，而 upstream 則是公司所擁有的儲存庫。所有的開發人員都是基於 upstream 的內容來建立新的分支進行開發，開發完成後再透過 Pull Request 來提交新的異動內容，整個過程都是基於 Git Flow 及 GitHub Flow 來運行，這當中的 Pull Request 則是開發人員在開發完成後的必經之路。</p>\n<h2 id=\"程式碼審查-code-review\" style=\"position:relative;\"><a href=\"#%E7%A8%8B%E5%BC%8F%E7%A2%BC%E5%AF%A9%E6%9F%A5-code-review\" aria-label=\"程式碼審查 code review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>程式碼審查 (Code Review)</h2>\n<p>Pull Request 之後最重要的關卡就是程式碼審查了。審查人員會針對開發人員本次所異動的內容進行審查，來決定是否允許本次的異動合併到 upstream 當中，審查人員會審視程式碼的寫作風格、程式邏輯及商業邏輯等並給予開發人員回饋及建議。</p>\n<p>如果有需要修正，開發人員則需根據建議進行調整後再行提交，直到沒有問題的程式碼才允許合併進到 upstream 儲存庫當中。</p>\n<p>Code Review 的過程也許很快，也可能會很漫長。開發人員如果一次交付太大量的異動內容也會讓整個審查的時間拉長，持續的小增量疊代交付會是個不錯的方式。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a49da412f74bf0f41c808205fca910d/7575b/CodeReview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.920245398773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABv0lEQVQoz2P4DwR//wKJj7t2Pa2t/X7p0vtz5y5UV788dAgo+A8shQswQKRfTp58VVf3x507ENEPly9vUle/t3Ahfv0MQPzt0qVz/PxfTpwACfz58+/3byD9dOfOFYKCX+7dw6MfpPlOVNRVExMQ798/BPn//yY9vXMVFSABsHFw8AcM/v37xwBkPnJyfpyRiSz999cvIHk2O+eAsyvUZpiJ/2AMkM3Pnj3dMHP660ePwAEHUgY0FOTs1++2z568Y0Lb46cvIL6BiH/69GnCpCkzZs158uQJw7xJXR56kptWLgar+A02G+TDo4cOtrVVt3bWnzh2FGLhnz8g8d37D8up6Krq2+zcvY9h66qNVbFRi+bOf/L08b0XP3Ze+Lbt7Odzj/4fWL8oJzYkIzJgUW/t8Vs/91z6tvHU55ef/rfM3eOaPqmwZXZe90aGTZP3T01d1d85Y/nqlV++/X7/5d/bz3++fv/Xvm5XcGxYfLhz/qSm99/+fvjy9+UHkLsmrzkbWr2ud876nEkHGZ4/fX740OEjhw8/efoEHhJAr9978frKgd3Xd2+5/uQBJJAg5IcPHzfuOrph98nLNx8AAIuH9zBQKv4VAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CodeReview\"\n        title=\"CodeReview\"\n        src=\"/static/0a49da412f74bf0f41c808205fca910d/a6d36/CodeReview.png\"\n        srcset=\"/static/0a49da412f74bf0f41c808205fca910d/222b7/CodeReview.png 163w,\n/static/0a49da412f74bf0f41c808205fca910d/ff46a/CodeReview.png 325w,\n/static/0a49da412f74bf0f41c808205fca910d/a6d36/CodeReview.png 650w,\n/static/0a49da412f74bf0f41c808205fca910d/e548f/CodeReview.png 975w,\n/static/0a49da412f74bf0f41c808205fca910d/3c492/CodeReview.png 1300w,\n/static/0a49da412f74bf0f41c808205fca910d/7575b/CodeReview.png 1608w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"linter-參與程式碼審查\" style=\"position:relative;\"><a href=\"#linter-%E5%8F%83%E8%88%87%E7%A8%8B%E5%BC%8F%E7%A2%BC%E5%AF%A9%E6%9F%A5\" aria-label=\"linter 參與程式碼審查 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Linter 參與程式碼審查</h2>\n<p>接著我們來談談 Linter，它可以怎麼幫助我們。為了讓程式碼審查的效率與品質提升，在 Linter 上我們會建立許多規則來針對程式碼的異動進行檢查，並且在開發人員發出 Pull Request 後經由 Webhook 驅動 Linter 來執行程式碼檢查。</p>\n<p>檢查的內容可能 MVC 站台 Controller 上的 Action 是否有正確的使用指定的 Attribute 或者是 SQL 命令的撰寫方式是否合乎規範來進行審查。\n透過 Linter 我們可以達到：</p>\n<ul>\n<li>自動化</li>\n<li>提升程式碼品質</li>\n<li>改善效率</li>\n<li>降低人為錯誤</li>\n<li>經驗、知識數位化</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6d047da5091e133ec8b6fba5a27a29c/85bc8/LinterCodeReview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.852760736196316%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAAB9ElEQVQoz22QzWsTQRjGxz9F6MWDIAVPHjxUerC04slDjfVQCyqkohXBFiJJ8SSSz4opBaM5VKiQJhHrIZKKJrubYkja5sPdZqNm1ySTTYLbbJLN7oyzG9AeMjDvzLzze5535gVY1zHGPfa7aLfX/f5esdir1YRwOGuzCdEouUImMHIAMqVgMHfufGs7YmYQRogsfzju09RUYm5OHwzMNBohbu983DsFpE0XOTQ5uteqGqSmGVFVo+PjXy0WUztKvH/mbGHitCYXsIaOa9zB5mOl8cugzYINmn4NQDUe/+c4NBp6AQoAcfWhSaskiqlQbst28quhsbHE/PxJ8f/K7L3ZfokhO1038DYUmPXbmtonzpqpp5eX6UdLugEgHRkYXy4flXh1MAB3LTPib3HoVKlU7HaH2+V0vAjVYJNkOh3F43M9f7aSTFJDBtbrE5cmJy9fKRYLwHpthqESP6rHqRKKUeyazxsIvHn7LpLlmgyPD3Klpw9uWRduBp2ODN89FHAgsndxduXqwpNAmALOOxvrG69S6cNmF3/bP3K7Pb6XfpfHm8mXWx28m6/cuL9omb5gXV36KfXbCt6Ks9cd723e7bVIHnz5nEyn07IskydpmibBBizkJAhV1eg2lDt0JhOPfcjyrG52WFG6O7upcIwpC/AvPMXvVBWZm4kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"LinterCodeReview\"\n        title=\"LinterCodeReview\"\n        src=\"/static/a6d047da5091e133ec8b6fba5a27a29c/a6d36/LinterCodeReview.png\"\n        srcset=\"/static/a6d047da5091e133ec8b6fba5a27a29c/222b7/LinterCodeReview.png 163w,\n/static/a6d047da5091e133ec8b6fba5a27a29c/ff46a/LinterCodeReview.png 325w,\n/static/a6d047da5091e133ec8b6fba5a27a29c/a6d36/LinterCodeReview.png 650w,\n/static/a6d047da5091e133ec8b6fba5a27a29c/e548f/LinterCodeReview.png 975w,\n/static/a6d047da5091e133ec8b6fba5a27a29c/3c492/LinterCodeReview.png 1300w,\n/static/a6d047da5091e133ec8b6fba5a27a29c/85bc8/LinterCodeReview.png 1875w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>在程式碼審查的過程中，有了 Linter 的幫助開發人員可以更迅速的得到回饋進行調整，常見的問題在交付初期就可以被檢驗出來，對開發人員甚至對審查人員來說都有很大的幫助。</p>\n<p>每一次的往返都是時間成本，對開發人員是，對審核人員也是。</p>\n<p>這一個段落討論的是從開發到提交程式碼的過程，從建立分支到提交合併請求，在程式碼審查階段可以透過 Linter 建立對應的檢查規則來提示程式碼撰寫時應該注意的事項，或提醒不洽當的寫作方式。開發人員可以快速的得到回饋，避免時間上不必要的浪費。</p>\n<hr>\n<h1 id=\"如何使程式碼更健康？\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%A8%8B%E5%BC%8F%E7%A2%BC%E6%9B%B4%E5%81%A5%E5%BA%B7%EF%BC%9F\" aria-label=\"如何使程式碼更健康？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何使程式碼更健康？</h1>\n<p>第二個部分要講的是單元測試的部分，測試的目的不外乎就是要確保系統本身的運作正常，那如何使程式碼更健康？</p>\n<h2 id=\"複雜的系統\" style=\"position:relative;\"><a href=\"#%E8%A4%87%E9%9B%9C%E7%9A%84%E7%B3%BB%E7%B5%B1\" aria-label=\"複雜的系統 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>複雜的系統</h2>\n<p>我們的系統只有一套程式碼 Single Code Base，但是我的面對的是如下圖所示的複雜使用情境。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d4e63e42914306a0326433d0abd5a323/a303f/SingleCodeBase.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.828220858895705%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAACHklEQVQoz21SzWsTURB/4B8iePAgPXvRk3goKHqrt1ALyUEPYiO5FO3BiA1KsEopKtKLiEWt0aYoRmsL+dIkzYdJmuyGpO2G5pNNN+lu9r19+6b7klAUHIZhZni/+c3HQ8AYA7DUcrhaYlLYeM/ePgZJ4CEzoVNi7SxQHf4VxE3qK6y/Aq0Lwyqpjdrty5GpC/DcZVqxUtwPzAm+e1ALjTioCqY2AIeWD8aRdA7BMxsbFox/77muVm5dgoVp3sp+uPHDU/I/APEjf6A3D8sBpfTNchC8vCOdRVvnEdhPMYqHfbLgJ+21h1UHbRsKEX1YeAe4wcFKtp3/XE2tgJJBUEl2p042r5wgHzz9aIgUcvhPUs+mjb0dXNzuh34SUdAjm3grinNppqoMtw6EL71yANTaYGajD/jQ4iO5DBHzenDdSERpq0GKeT0WJqUiEQt6PIozCbotgqxSqpq4x2fWGnvRh/aI+3qvWhqOjIPB+pN5ZW1ttD++f9MyZDOdnnCKk3fN3M4gyVDSY396Bs2dRvHZazzVbstu96rDUXA6oVzmVzQUYH3ToptZ9F+0/Rp36C98I3Dae3NxDC2MocR9G6fSNGNpadflkr1ekDuM1oTMSiXvB9C01VB5wlWdnCXJ4giMO834/HTs0Q2tKY16lGUjFoN63aI11Wwi/CaXWAZDss6GhV1Davz9SRj8X3ie4nqnFuy2fjPaO04eI44AZDwykEA6XkEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SingleCodeBase\"\n        title=\"SingleCodeBase\"\n        src=\"/static/d4e63e42914306a0326433d0abd5a323/a6d36/SingleCodeBase.png\"\n        srcset=\"/static/d4e63e42914306a0326433d0abd5a323/222b7/SingleCodeBase.png 163w,\n/static/d4e63e42914306a0326433d0abd5a323/ff46a/SingleCodeBase.png 325w,\n/static/d4e63e42914306a0326433d0abd5a323/a6d36/SingleCodeBase.png 650w,\n/static/d4e63e42914306a0326433d0abd5a323/e548f/SingleCodeBase.png 975w,\n/static/d4e63e42914306a0326433d0abd5a323/3c492/SingleCodeBase.png 1300w,\n/static/d4e63e42914306a0326433d0abd5a323/a303f/SingleCodeBase.png 1733w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>上述的這些還僅僅只是正式環境上的數據，其他還有測試環境跟 Pre Production 環境，在這樣的條件之下怎麼確保系統的品質及正確性，是我們很重要的課題。</p>\n<h2 id=\"真的不考慮寫-unit-test-嗎？\" style=\"position:relative;\"><a href=\"#%E7%9C%9F%E7%9A%84%E4%B8%8D%E8%80%83%E6%85%AE%E5%AF%AB-unit-test-%E5%97%8E%EF%BC%9F\" aria-label=\"真的不考慮寫 unit test 嗎？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>真的不考慮寫 Unit Test 嗎？</h2>\n<p>沒有測試過的東西可以交付嗎？為了提升產品的品質，有很多種方法，投入大量的測試人力資源也可以達到一樣的效果，但這樣做有辦法變\"快\"嗎？</p>\n<p>開發人員自己寫的程式有自己測試嗎？你是怎麼測試自己寫的程式碼的呢？</p>\n<ul>\n<li>手動測試：異動、建置 (Full)、執行、驗證</li>\n<li>單元測試：異動、建置 (Partial)、驗證</li>\n</ul>\n<p>一般來說最直覺得測試，就是透過萬能的雙手，一步一腳印的操作來驗證，但是也許一個案例就需要花費你 3 ~ 5 分鐘的時間，這樣你時間夠用嗎？</p>\n<p>單元測試可以只針對局部的方法進行驗證，僅需要較短的時間就能驗證成果，這樣真的不考慮撰寫單元測試嗎？</p>\n<h2 id=\"測試金字塔-test-pyramid\" style=\"position:relative;\"><a href=\"#%E6%B8%AC%E8%A9%A6%E9%87%91%E5%AD%97%E5%A1%94-test-pyramid\" aria-label=\"測試金字塔 test pyramid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>測試金字塔 (Test Pyramid)</h2>\n<p>講到單元測試就不免俗的要提到測試金字塔來說說：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 466px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6c930f2d4ae8a6068696ace34e9566e/fc1a1/testPyramid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.760736196319016%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA4lAAAOJQEPVgSRAAACCUlEQVQoz3VSy4oaURBtbTNjHp3HJGYmCTIRIjLJF4jgJtkE3JiNzA/4Ae6yyR+EbN1oBBeS1awCoqgLEd2JTxBfIIqI73dj212putMNvYgFp+veulWnqrqK4zjuKeIB4h3iJaeTUChkJB2JRD7FYrFbOlcqFWYzmUyamxnxEXGBeE2G94g3iLeIczJYLBbmCQAsuNvt/pnNZkev12tRExk8Ho9GaEBcIh4hHnNqhXS5UrMxaTabPOlMJvN1Op3CZrOBTqfzW03E6xqhpK+4/8gzjTAQCBhU29lgMKj1ej3I5/MSkaZSqc/0kM1m+VOEWvBzjbDdbrMfFI/Hf4iiCK1WSyqVSsflcgnVarWIT4xstVpxPM+frJARYjvsEgwGb/r9vkhVrddrZbfbwXw+l2RZhkKh8F3X+mlCo9H4ULsMh8O/4/EYyuWyVCwWAQejoJbr9TqgfRsOhz+Qn8/nM50kdLvdT+gQjUZvsRqgyaJWUCukF4sFTCYT6XA4QC6XuyPfdDpNhBY9Ea0KLwjCC1ovp9MpYHU9bAfw/8kqMZEyvd/vlSOKoiiQTCa/EYHNZrvUE17TUtvtdraUtVrtF9yLhALYpoI2aDQaVJVCg0E50mc0GrUdDodAe2g2m6/UFeQurFYrGa/9fv+X7XYrsggs4r4QJkCggah2Okvkl0gkflKsy+UijrN/BU5PhKFol2wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"testPyramid\"\n        title=\"testPyramid\"\n        src=\"/static/f6c930f2d4ae8a6068696ace34e9566e/fc1a1/testPyramid.png\"\n        srcset=\"/static/f6c930f2d4ae8a6068696ace34e9566e/222b7/testPyramid.png 163w,\n/static/f6c930f2d4ae8a6068696ace34e9566e/ff46a/testPyramid.png 325w,\n/static/f6c930f2d4ae8a6068696ace34e9566e/fc1a1/testPyramid.png 466w\"\n        sizes=\"(max-width: 466px) 100vw, 466px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>測試金字塔的構成由下至上分別是：</p>\n<ul>\n<li>Unit Test 針對類別的方法進行測試</li>\n<li>Service Test 整合多個類別進行服務之間的互動測試</li>\n<li>UI Test 與使用者一樣從系統介面進行操作來測試</li>\n</ul>\n<p>測試速度越靠近金字塔頂端越慢，越靠近頂端關係到使用者介面及多個的服務則越複雜。橫軸是測試數量分佈的多寡，越底端發生的錯誤可以越快定義問題與解決問題。靠近頂端的問題，則牽涉的範圍較廣要確切的找到問題發生的位置就需要花費更多的時間。一般來說以金字塔的形狀來配置上述三種測試類型的數量會是比較好的方式。</p>\n<p>另外相反的模式則是像冰淇淋甜筒般的配置測試：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ff6cdac5c1c6d93b11a382096a5c05f8/2ec65/software-testing-icecream-cone-antipattern.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 123.31288343558282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAesqYNMqOcotDAn/xAAbEAEAAgIDAAAAAAAAAAAAAAABABECEBMhQf/aAAgBAQABBQK1lzkqOPdQxAW5ga91/8QAFREBAQAAAAAAAAAAAAAAAAAAICH/2gAIAQMBAT8Bg//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABsQAAEEAwAAAAAAAAAAAAAAAAABEBExICFx/9oACAEBAAY/Ai1NnS2jL//EAB8QAAIBBAIDAAAAAAAAAAAAAAABERAhMWFBcVHB8P/aAAgBAQABPyFuTLXQn4Dgu2KvxofECwonsXhLk+NU9xU//9oADAMBAAIAAwAAABDT4kD/xAAYEQEBAAMAAAAAAAAAAAAAAAABABARMf/aAAgBAwEBPxAdOTGP/8QAFxEBAQEBAAAAAAAAAAAAAAAAARARIf/aAAgBAgEBPxBe5En/xAAdEAEBAAICAwEAAAAAAAAAAAABEQAhMUEQUdFx/9oACAEBAAE/EEUWoCk+42xT2/cIyX0NUwrCnkrvKRm/AA2uQ7g5FXKPLdLsHpyrYbw0I9+Ti/r4/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"software testing icecream cone antipattern\"\n        title=\"software testing icecream cone antipattern\"\n        src=\"/static/ff6cdac5c1c6d93b11a382096a5c05f8/6aca1/software-testing-icecream-cone-antipattern.jpg\"\n        srcset=\"/static/ff6cdac5c1c6d93b11a382096a5c05f8/d2f63/software-testing-icecream-cone-antipattern.jpg 163w,\n/static/ff6cdac5c1c6d93b11a382096a5c05f8/c989d/software-testing-icecream-cone-antipattern.jpg 325w,\n/static/ff6cdac5c1c6d93b11a382096a5c05f8/6aca1/software-testing-icecream-cone-antipattern.jpg 650w,\n/static/ff6cdac5c1c6d93b11a382096a5c05f8/7c09c/software-testing-icecream-cone-antipattern.jpg 975w,\n/static/ff6cdac5c1c6d93b11a382096a5c05f8/2ec65/software-testing-icecream-cone-antipattern.jpg 979w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>先大量的手動測試，其次是自動化測試，再來是整合測試，最後是較少量的單元測試，在這樣的測試配置下要花費更多的時間來測試及解決問題。</p>\n<h2 id=\"unit-test-衡量指標\" style=\"position:relative;\"><a href=\"#unit-test-%E8%A1%A1%E9%87%8F%E6%8C%87%E6%A8%99\" aria-label=\"unit test 衡量指標 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Unit Test 衡量指標</h2>\n<p>如果要透過單元測試來提升產品的品質，那怎麼衡量將會是首先要考慮的。</p>\n<p>究竟我們現在單元測試做的程度如何？是變好了？還是變差了？為了量化所以我們要定義衡量好與壞指標是什麼？</p>\n<ul>\n<li>測試案例數量：透過常見的三正一反或邊界值測試來增加測試案例，數量越多越好。</li>\n<li>測試通過率：用通過率做為指標！？ 出現測試失敗的程式碼可以交付嗎？？？</li>\n<li>測試含蓋率：程式碼有被單元測試所執行過的範圍。</li>\n</ul>\n<p>以測試含蓋率為指標是我們認為較能呈現出程式碼異動與單元測試之間的關連性，一但程式碼有調整，涵蓋率就有可能隨之下降。透過測試涵蓋率的觀察，我們可以知道程式碼是否充分的受到單元測試的保護及其成長的趨勢究竟是上升還下降。但是特別要提醒的是即使測試涵蓋率 100% 也不代表產品 100% 沒問題，這只是我們用來衡量趨勢用的指標。</p>\n<h2 id=\"code-coverage-tool\" style=\"position:relative;\"><a href=\"#code-coverage-tool\" aria-label=\"code coverage tool permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code Coverage Tool</h2>\n<p>既然我們要以測試涵蓋率為指標，這邊就列舉了幾個測試涵蓋率的分析工具：</p>\n<ul>\n<li>Visual Studio：但是需要 Enterprise 等級以上才可以使用</li>\n<li>dotCover：包含在 ReSharper 之下</li>\n<li>AxoCover：目前在 Visual Studio Marketplace 上的說明僅支援到 Visual Studio 2017</li>\n<li>OpenCover：Open Source</li>\n<li>Coverlet：跨平台且支援 .Net Core</li>\n</ul>\n<p>透過這些工具可以讓我們獲得程式碼的測試涵蓋率，以及知道程式碼的那些段落是沒有受到單元測試保護的部分。</p>\n<h2 id=\"核心方法-core-method\" style=\"position:relative;\"><a href=\"#%E6%A0%B8%E5%BF%83%E6%96%B9%E6%B3%95-core-method\" aria-label=\"核心方法 core method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>核心方法 (Core Method)</h2>\n<p>系統運行的監控可以幫助我們了解線上系統是否有無異狀，那程式碼是不是健康的狀態有被關心嗎？接下來要說明的是我們怎麼樣監測測試涵蓋率。</p>\n<p>由於程式碼的數量龐大我們沒有辦法投入所有的資源來撰寫單元測試，所以將有限的資源集中在幾個重要的商業邏輯上。我們列舉了系統當中重要的核心方法，這些方法是相對於產品當中最核心的功能，特別針對些方法來監測其測試涵蓋率的變化，並加入我們的持續整合流程當中，針對提交的程式碼進行驗證，一但有程式碼合併後便會開始執行測試涵蓋率分析。幾個主要的步驟如下：</p>\n<ul>\n<li>系統建置</li>\n<li>測試涵蓋率分析</li>\n<li>核心方法的測試涵蓋率檢核及記錄</li>\n<li>如果有測試涵蓋率下降則通知團隊</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4d0b15bf2399e2853ae24560fa18484e/84a78/CoreMethod.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.717791411042946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAABVUlEQVQY02M4sH9fWXnF69cv/4PBpStXjx8/DmS8ePly5ZL5r548AbL//vv3HxtgyGtZZBuQsWDLhTOP/h8+sKc8xa2pufXUw/8rtp+ua+9qWT7/7tP3v/8CVSL0/wObBSQZZm68UNq3dufJe0D+sZ2LZ5ZbXzq9H8i+euV6c3df2cLVJy4+O3rrD1Dxnz+/IdqA5vz5DRJh+PLl85Nnz3//+gUx9fu3L3//AiX+f/78+cWL518/vP/95+/33/9fvfk4Z03dw5dXgFLLDx+zzozde3I/w3/8AOzAn7/+T1nWXtYR9+zFO6AlBdmN+uKsM3pTGP6BAbJ/INwfP39mb69ZcmrZg+f/D17/dfXm6aMnDkHUvL/7ZE1n25f3z7DYDNH8/vP7iH158fuKn7z49uM3SPTPn78QBUDq1z+Qm3Bq/vbty/Sjc6Yfnf3n5y+4ILIiIAEAiiumw/J7GR8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CoreMethod\"\n        title=\"CoreMethod\"\n        src=\"/static/4d0b15bf2399e2853ae24560fa18484e/a6d36/CoreMethod.png\"\n        srcset=\"/static/4d0b15bf2399e2853ae24560fa18484e/222b7/CoreMethod.png 163w,\n/static/4d0b15bf2399e2853ae24560fa18484e/ff46a/CoreMethod.png 325w,\n/static/4d0b15bf2399e2853ae24560fa18484e/a6d36/CoreMethod.png 650w,\n/static/4d0b15bf2399e2853ae24560fa18484e/e548f/CoreMethod.png 975w,\n/static/4d0b15bf2399e2853ae24560fa18484e/3c492/CoreMethod.png 1300w,\n/static/4d0b15bf2399e2853ae24560fa18484e/84a78/CoreMethod.png 1832w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>透過這個檢核機制來確保這些核心方法都有受到單元測試的保護。一但有測試涵蓋率未達標準的方法出現，將透過 Slack 的訊息來主動通知團隊進行維護，如圖所示：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6aeeb07f7fbc793841a7469df685cb6c/4d08a/SlackNotify.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.39877300613497%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAABmUlEQVQoz12R2Y7UMBBF+x8QZHM223E6e2ez4yR2lg4dDRpGDIOQEM9IaMQr/8B38KWYZpAGpKtSPVTdWzp1+PLw8funz71cqoYFxxSR2PbQSx1opvvKdLSrVGMAz7T9/3T48fXx5+O3G9q/effhvO3zeV+3XcxbkpeIJDhMSJSGUQZcrAPPAL7p+JYDLee6/AJ4ynlPC3m5EXKR8zatl3m9yGW7vXu/nPe39w+3d/dJXkEcQghN4OmW+8fooNk+1IEKYmLuelGzvmXjIBfaqbqOcuXDpPqG9UJOXVOFcRFnpyQ6QogPugORYW9xTsXMuGC9pFyoaWWkrhDTysdpWl+r3Yr2jI9NkWASExy4HnxavqQFm879OGenph8nNarmGJfDtLSdKCpatiOvT3EYqGsVPM26nv03OaNypozXlPNB5QvKh6YbKJe0bctTUZdVXxdHEmjgGW3NgcS0B5JDtvhZG0apwotIpOSh0MMRRhhBqIQRAg40nr9Kt6FvuQ0KUVqSuAij3PUD9VuF1PiNVIH1n2T5xr9//gXnpF+p/unyKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SlackNotify\"\n        title=\"SlackNotify\"\n        src=\"/static/6aeeb07f7fbc793841a7469df685cb6c/a6d36/SlackNotify.png\"\n        srcset=\"/static/6aeeb07f7fbc793841a7469df685cb6c/222b7/SlackNotify.png 163w,\n/static/6aeeb07f7fbc793841a7469df685cb6c/ff46a/SlackNotify.png 325w,\n/static/6aeeb07f7fbc793841a7469df685cb6c/a6d36/SlackNotify.png 650w,\n/static/6aeeb07f7fbc793841a7469df685cb6c/4d08a/SlackNotify.png 709w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>訊息當中包含了</p>\n<ul>\n<li>Repository Name：儲存庫名稱</li>\n<li>Project Name：專案名稱，此專案下未通過的數量有 6 筆</li>\n<li>Method Level Coverage：Update 方法的測試涵蓋率為 33% 低於目標值 100% 及其所屬團隊為 g11n</li>\n<li>Namespace Level Coverage：命名空間層級的測試涵蓋率，一但 Namespace 下的程式碼有異動未加上測試就會反映在涵蓋率上</li>\n<li>Project Level Coverage：專案層級的測試涵蓋率</li>\n</ul>\n<h2 id=\"code-coverage-log\" style=\"position:relative;\"><a href=\"#code-coverage-log\" aria-label=\"code coverage log permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code Coverage Log</h2>\n<p>透過涵蓋率的歷史記錄我們可以清楚的知道各方法的測試涵蓋率變化情形，在這邊列舉兩個核心方法測試涵蓋率的歷史記錄：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22a7b16d1dd87fd16909c53307fceabe/b67f3/CodeCoverageLog.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.963190184049076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAABPElEQVQoz5VSXW+DMAzk//9I9lB1Q0UwQUKwHX/sAmu19mHTLqfIEDu2L+6YWZ9QVeNyeX/r+3Vd0zT1ff8xfOz7bmYPJ9illA6WuxMR9oiTQcx72dpFIjCYCd7+A82HqAXDCnfzEIpKYbs6K3zVA7QIO4wHcMQaKLmbpmnbCq6gail5zkLjJ89bmpa87lkis4OJPO0wIideFhJDMHXjOKaUWm4sFCHspRzlm6c1mEIr6LUqV/RR11Vr/S57GIZ5nu2EhKZkUk1ai00gfG75pGNPqwvb0UILfsnsOQVU0PgTrWdc0KSH5hCNtGVAUvHf8aR2lYofVgSKtX7F/hFsxztqJkVj5sb2wDkSLzhH4565VhaWTELSWOQEPLBjvJja+QPwx8/7kJxAOXrQjxWxLAue43q93m43JHwR7AtEXcCTMoVUeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CodeCoverageLog\"\n        title=\"CodeCoverageLog\"\n        src=\"/static/22a7b16d1dd87fd16909c53307fceabe/a6d36/CodeCoverageLog.png\"\n        srcset=\"/static/22a7b16d1dd87fd16909c53307fceabe/222b7/CodeCoverageLog.png 163w,\n/static/22a7b16d1dd87fd16909c53307fceabe/ff46a/CodeCoverageLog.png 325w,\n/static/22a7b16d1dd87fd16909c53307fceabe/a6d36/CodeCoverageLog.png 650w,\n/static/22a7b16d1dd87fd16909c53307fceabe/e548f/CodeCoverageLog.png 975w,\n/static/22a7b16d1dd87fd16909c53307fceabe/3c492/CodeCoverageLog.png 1300w,\n/static/22a7b16d1dd87fd16909c53307fceabe/b67f3/CodeCoverageLog.png 1338w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>X 軸是時間以週為單位，而 Y 軸則呈現的是測試涵蓋率的百分比，以紅色線條 Method 2 的例子來說，在開發初期就已經加入核心方法的清單，所以涵蓋率由 0% 開始上升到 81% 隨著後續的程式碼異動導致涵蓋的下降，再經由收到通知的團隊後補上單元測試來提高測試涵蓋率，藉由涵蓋率歷史紀錄的歷程可以幫助我們了解該方法變化趨勢為何。</p>\n<p>當然更好的做法應該是採用測試驅動開發 ( TDD )，讓程式碼在開發當下就充分的受到測試的保護，持續的維持測試涵蓋率在 100% 的狀態，但這就很仰賴開發人員個人的功力。</p>\n<p>這個段落說明的是，我們推動單元測試的過程無法全面性的加上測試，所以把目標放在重要的核心方法上，並加以監測這些方法的測試涵蓋率變化。</p>\n<hr>\n<h1 id=\"面臨多個環境的-deploy-情境怎麼做？\" style=\"position:relative;\"><a href=\"#%E9%9D%A2%E8%87%A8%E5%A4%9A%E5%80%8B%E7%92%B0%E5%A2%83%E7%9A%84-deploy-%E6%83%85%E5%A2%83%E6%80%8E%E9%BA%BC%E5%81%9A%EF%BC%9F\" aria-label=\"面臨多個環境的 deploy 情境怎麼做？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>面臨多個環境的 Deploy 情境怎麼做？</h1>\n<p>講完單元測試後，第三個部分要提到的是我們的部署流程的演化過程。</p>\n<h2 id=\"多市場的部署\" style=\"position:relative;\"><a href=\"#%E5%A4%9A%E5%B8%82%E5%A0%B4%E7%9A%84%E9%83%A8%E7%BD%B2\" aria-label=\"多市場的部署 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>多市場的部署</h2>\n<p>首先先說明我們在部署上遇到了什麼樣的問題。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c13c0e9f04325f8a0db8ef9823a323d/913b9/MultipleMarket.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.69325153374233%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAACCUlEQVQozzWS22sTQRjF9/8SfPRVEKFIEBu0IRYlKlJqNRWVCgVBBG+gKIU+RCFWvLQppkgUSbWYptFKW68bc9nmurvZndv3zYyzKQ7zMGf4HQ7fmbGQ+4IHEujO9mYu96rZrGktEJnSKIAICJ2OW9v12z2vvL6Wzy97Xk9JztkAIbQED7XWhJLx1Onzk1Nzj+56Xpd2eqTubLx5ufoiU+8EBqhs12Lx+MXpy8+eziEIpRUgWDA0g4CJSxNj52KJ2H7HsZvvV/9mF+5dn70znSbEN0Cn002eSRw7eWjy1EHOSGRBYYEIUUkj/lTt7OLzQmHR7bf1cHXdQdv1ODKUEbC59S37euFjcYUxIiMzWApCwXzBPCmp1lxriSLkxGVBH31bhQ0UhAc9IQKlDGC2BD6IeDOzFAFEhZEwcL9W1j0TKxmASQNEgkDYbo1Wf0C/1Wo1yqU1ErgK6dDyvzDO+YV0eip9LZdbopRq5mvmVr983vmw7FdtAzQqleOJxJWZ2XeFFTWcgpuZzTuZkzHEk/Hk2dH4yL567Zf6/lZvPHk8c/Vmajz0XQM4zeaR0ZGjY4dTJw5QElk4MEuIECQaUSqXbj24kZm/3es6e4X9brS2ftpUUKWUkcVPxYfz9/NLmb22OXDLTGt6M71LhQPqgzI/JJLRDXU0a6NEEwJSCMkDFmUKFBy5RPYPoRQJRHa+jDwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MultipleMarket\"\n        title=\"MultipleMarket\"\n        src=\"/static/8c13c0e9f04325f8a0db8ef9823a323d/a6d36/MultipleMarket.png\"\n        srcset=\"/static/8c13c0e9f04325f8a0db8ef9823a323d/222b7/MultipleMarket.png 163w,\n/static/8c13c0e9f04325f8a0db8ef9823a323d/ff46a/MultipleMarket.png 325w,\n/static/8c13c0e9f04325f8a0db8ef9823a323d/a6d36/MultipleMarket.png 650w,\n/static/8c13c0e9f04325f8a0db8ef9823a323d/e548f/MultipleMarket.png 975w,\n/static/8c13c0e9f04325f8a0db8ef9823a323d/3c492/MultipleMarket.png 1300w,\n/static/8c13c0e9f04325f8a0db8ef9823a323d/913b9/MultipleMarket.png 1822w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>一開始我們只有一個市場，位於東北亞的區域開始營運，我們建立了屬於這個市場的 Jenkins 服務來進行系統部署。</p>\n<p>幾年後在東南亞成立第二個市場，我們複製第一個市場的經驗來建構環境，也配置了另一座 Jenkins 服務來部署系統，但這意味著我們要維護 Jenkins 服務的成本提高了。</p>\n<p>又過了一陣子東北亞出現了第三個市場，但是分屬在不同的環境底下，導致做法有別於第一個市場，又由於環境配置的問題，部署流程略有差異存在。</p>\n<p>不久後在東南亞也開設了第四個市場，又針對這個市場建置了專屬的部署流程，在這樣的因果關係之下，使得我們的系統在部署上遇到了瓶頸，圖上還僅只是正式環境上的呈現，另外還有多達十幾座的測試環境也都有部署上的需求，Jenkins Job 的數量跟維護成本也隨之升高。</p>\n<h2 id=\"持續整合、交付-ci--cd\" style=\"position:relative;\"><a href=\"#%E6%8C%81%E7%BA%8C%E6%95%B4%E5%90%88%E3%80%81%E4%BA%A4%E4%BB%98-ci--cd\" aria-label=\"持續整合、交付 ci  cd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>持續整合、交付 (CI / CD)</h2>\n<p>我們透過 Jenkins Job 來實現持續整合及交付，初期的做法是一條龍的把 CI 跟 CD 放在同一個 Job 當中一次完成整個流程，但隨著系統的擴展變化我們遇到了維護上的困難。因此，我們調整了部署策略來改善維護上的問題，讓整合與交付分開來運行來實現 Single Build, Multiple Deploy. 並以 Artifacts Management 做為整合與部署之間的介面，如此一來我可以更彈性的來設計整個整合部署的流程。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/12edd36682e5dda6430463ef81adba78/e548f/CI_CD.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.2760736196319%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABJ0AAASdAHeZh94AAADbklEQVQ4y6VR709bVRg+RZdM/wC/6Qc/+lGSKYkOjYSxCHZjC3QBWVtaZB1d3KQF9oPW1t7+uKW1ZZT5aUsYMxGnqJcRdCjQ3rZXJpR1DKesW6VwubeU3kt/0MLtPZ65ZJlx33zznOfNeZ73fc/JOSB2+TJtt6/h+JrTmXS51vseMdPXt4rj604njeOPxQ23G4kpt5t2OlHlmtW6MjwMaKsV9vcLXq/g8fys1Y6q1Qvd3fd6e6Fv4M65s7sezy+PxLZZne5qS8vEyZNIKXm90OPhfD6w6nCgPRzwLV24cFUuhz7f2In2H7Wn0g5HsLPz7vnzIyoVcq+r1eQnZya12rBOBwcHiy7X5qVLgHY4xIsX4cDAus06JJdTev3XanVY3xUzmRYNhjSOX1Mow3r9sFKJpiAr/pkFHYCumUbNcQwrYFjGYtmx2e53d1Ed2qTR+Bic2bzrcCAx3NHBGo2kRvOgp2fHbs9g2LbZzHi9ILW0xM5Ms6Sf8c9woVCGolIkibDxD1i//4mYpah0KMT4/WwgwExNoUYA/0cALhFn5oJMhGIiYS46y0bCbIRCYObDhS2+wG+yJMEEiHSQSAWJDZLgQwRDjrEzo3xsESQsbaJRJpiacgbZ8mlpvle2bTgmmJuLXXX02JerX3QWKgGUPpd4DySrQaYGLL8LirVlsBqk2l4DrLEF2ltLVsW4svqGonqi9UBIUwddH4mfNqRuDNFYM6wBf76/56s3JdOVkpE3JNcrJBP7y+BhwCtfAesmBcRV9LljQ7J3YL+GPFH7zYdV0N3OdTVOW3W3bLVQCr6rKLt9ULJzRHKlXJI7IhksL0PilvpVwPQ2QbsC2pWTqgNDDfuJ41ULp6RZcxOB1/3U1zxhkX/b8/Z8zfPXysH3FWBkH7jyOghUSuAhwMtfBonPdTnz8SzWmsdaN03ygk1VtKpjhsY14mByRkZgh8bxerr9pZx0T+boC8WGven6vYXGF/MfgKTuLZDP8NxfMT7xkF95mF2NcyuxHEP//utUoH8fP16VuFlP3zz6R/CHQmKZvx9FL5x9sIiYW45mU+yz/1kQSvHFyeio5rfRjxP3povFnWcUiSJASyyVnkZJEJCzXdilqLnZW/Nb2TyqLAm7Ykn4F8QS+M84EXEmsxW9vRCZn0OMcjrNP7Gejr8Be/7PHVjWvxsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CI CD\"\n        title=\"CI CD\"\n        src=\"/static/12edd36682e5dda6430463ef81adba78/a6d36/CI_CD.png\"\n        srcset=\"/static/12edd36682e5dda6430463ef81adba78/222b7/CI_CD.png 163w,\n/static/12edd36682e5dda6430463ef81adba78/ff46a/CI_CD.png 325w,\n/static/12edd36682e5dda6430463ef81adba78/a6d36/CI_CD.png 650w,\n/static/12edd36682e5dda6430463ef81adba78/e548f/CI_CD.png 975w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接下來我們就將整個部署流程分成建置與部署兩個部分來說明。</p>\n<h2 id=\"jenkins---build\" style=\"position:relative;\"><a href=\"#jenkins---build\" aria-label=\"jenkins   build permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins - Build</h2>\n<p>首先是建置的部分，在我們的 CI / CD 流程當中引用了一些新的機制，其中包含 Jenkins 的分散式建置來提升效率，整個部署流程當中系統建置、測試與驗證是最占用資源的項目，因此透過分散式的建置以分散原本只有單一座 Jenkins 伺服器的負擔，也只需要維護同一份 Job 組態設定。Configuration Management 主要用於多環境的組態管理，用來解決每個環境的不同設定值的問題，在建置完成後我們將進行測試及驗證，驗證單元測試是否有失敗的測試案例或是核心方法的測試涵蓋率是否有低於標準，未通過驗證將會中斷我們的建置流程。Artifacts Management 則用來將我們建置好的應用程式打包並上傳進行存放，好做為部署時期的來源資料以解決多環境跨區域的問題。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25f20b4392afafd8ef065e298db82f84/b4aee/Build.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.306748466257666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABg0lEQVQoz4WQzy/EQBTH+//4E9wcJeLo5CQRFzcJN0JENuKAhPgVISEkfuw6bMhmbfzc7CoW9WtbVkq7qxZtZzrVTqdj2iY42e/h5b3vzGfee8PZCCDLoJT6hLBYFu8Pd9aAGTqhWPL0fFeuFiOHRUPXlccb7GEuNTe5OdLn2i4v2TKk2fn5yZbGy/0NaMC85JQ0T6tW+yc6k3vTDAPIMxEpbvekYw3CwSqXWIsvTc16jvukYQPRLwvOdHX3drQpV4KsU2DTQz7VFWtVFZXB0PYsh6pHQ1K86VXMcAACwzRpqNsXR/nwAdD580uMcWS6rivLLyRcKhq7XKmc8jkAEceKB0ncSsTf3o2s6GJCFQ1A9j6lxI/w3+WjHFkIAMtxnAAeHF2sq2/OHBfCU5IVsfIR9aH/i8EktpxvH1hZ3wv+07CsnFB60z5/hvwfpmpFOz691t51lp9IpbGF8SKfJLS2uL+F7weIKOymE8M2gjWbB7AfrhfdAwAWLgrnZzwhfs3O3+qyJWpVRpE1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Build\"\n        title=\"Build\"\n        src=\"/static/25f20b4392afafd8ef065e298db82f84/a6d36/Build.png\"\n        srcset=\"/static/25f20b4392afafd8ef065e298db82f84/222b7/Build.png 163w,\n/static/25f20b4392afafd8ef065e298db82f84/ff46a/Build.png 325w,\n/static/25f20b4392afafd8ef065e298db82f84/a6d36/Build.png 650w,\n/static/25f20b4392afafd8ef065e298db82f84/e548f/Build.png 975w,\n/static/25f20b4392afafd8ef065e298db82f84/3c492/Build.png 1300w,\n/static/25f20b4392afafd8ef065e298db82f84/b4aee/Build.png 1823w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"jenkins---deploy\" style=\"position:relative;\"><a href=\"#jenkins---deploy\" aria-label=\"jenkins   deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins - Deploy</h2>\n<p>接著說明的是部署階段，由於建置階段已經將應用程式打包並上傳至 Arctfiacts Management，接下來的 Jenkins Job 只需要將應用程式部署到指定環境的伺服器即可。透過 Artifacts Management 來做為建置與部署之間的介面，在跨區域、跨市場的部署上就相對單純多了，不同環境有著一致的運行方式，維護的成本也下降了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a35799edd1c4df22d52b05fc1a9b7e10/71d2f/Deploy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.963190184049076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAABgElEQVQoz5VRUUvCUBjdj+qtfkJEYQ9FWeR7UllQRIQlFPQgUUFEL4aJGWhlSIhRhBoIaU0fotTpNitHU7e8zjl3b9OBWaLY4XL5zvnu4Tv3XkyUJJ7LowYgVDYBgLsrZ/oVVyXUBIJIOV1neDSm1BjudQdPdjiaUggHqm+sWEUo5fPujwx47HtZOq7osgzFiiIjiiIndTrDwor12BZ9CmGHxnWDVksEA0ovnBRO779IFgp83jw4bJmecpvXKjxH5ZAjwEfSkCJTmjHNomlmqL/HYdnA4mn6xh8EADTywXryDEktzS/vGk0iAAovleWKVNMt1qO5Vf2sftxlM2NiWWCyWdUgw9qql0pUiflk+CJAvyFX5UScyBe4sgAw1ALVzBZKNFNs0KbuD8dgHa3m50zFhwtqnHZoO5lipQfin2Y1Bc+zoYsDv33r4z3xJ2pHs1z7TxK/TNr7bjd7Y9fbsK52Obl2jqFf4ucTSc9ojgqqb9/tnVUkEsnHcESSUQd8A+telEoqkHh6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Deploy\"\n        title=\"Deploy\"\n        src=\"/static/a35799edd1c4df22d52b05fc1a9b7e10/a6d36/Deploy.png\"\n        srcset=\"/static/a35799edd1c4df22d52b05fc1a9b7e10/222b7/Deploy.png 163w,\n/static/a35799edd1c4df22d52b05fc1a9b7e10/ff46a/Deploy.png 325w,\n/static/a35799edd1c4df22d52b05fc1a9b7e10/a6d36/Deploy.png 650w,\n/static/a35799edd1c4df22d52b05fc1a9b7e10/e548f/Deploy.png 975w,\n/static/a35799edd1c4df22d52b05fc1a9b7e10/3c492/Deploy.png 1300w,\n/static/a35799edd1c4df22d52b05fc1a9b7e10/71d2f/Deploy.png 1485w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我們可以更有彈性的來設計整合及部署流程，進而優化部署流程如，藍綠部署、金絲雀部署等。這個段落說明的是我們整個部署的架構演化過程，從一個市場成長到四個市場，並引入新的機制來改善這過程中所遇到的困境。</p>\n<hr>\n<h1 id=\"總結\" style=\"position:relative;\"><a href=\"#%E7%B8%BD%E7%B5%90\" aria-label=\"總結 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>總結</h1>\n<p>這次提到的幾個主題分別是：</p>\n<ul>\n<li>Code Review 透過 Linter 可以加快整個審查的過程</li>\n<li>Unit Test 透的監測機制來確保程式碼的品質</li>\n<li>\n<p>面臨複雜的多環境 Deploy 流程改善</p>\n<ul>\n<li>Jenkins Distributed Builds</li>\n<li>Configuration Management</li>\n<li>Artifacts Management</li>\n</ul>\n</li>\n</ul>\n<p>這不一定是最好的方法\n但是持續的藉由回饋來改善將會一直的疊代下去...</p>\n<p>身為 Backend RD 我們所關注的問題不再只是程式碼本身，而是整個產品從開始到交付的過程怎麼更快、更好、更快速的因應市場的改變。</p>\n<hr>\n<h1 id=\"參考資料\" style=\"position:relative;\"><a href=\"#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99\" aria-label=\"參考資料 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>參考資料</h1>\n<ul>\n<li><a href=\"https://nvie.com/posts/a-successful-git-branching-model/\">A successful Git branching model</a></li>\n<li><a href=\"https://guides.github.com/introduction/flow/\">Understanding the GitHub flow</a></li>\n<li><a href=\"https://martinfowler.com/articles/practical-test-pyramid.html\">The Practical Test Pyramid</a></li>\n<li><a href=\"https://alisterbscott.com/kb/testing-pyramids/\">Testing Pyramids &#x26; Ice-Cream Cones</a></li>\n<li><a href=\"https://wiki.jenkins.io/display/JENKINS/Distributed+builds\">Jenkins Distributed builds</a></li>\n<li><a href=\"https://rickhw.github.io/2018/07/08/DevOps/Artifacts-Management/\">Artifacts Management</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E6%80%8E%E9%BA%BC%E8%AE%93-code-review-%E7%9A%84%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87%EF%BC%9F\">怎麼讓 Code Review 的效率提升？</a></p>\n<ul>\n<li><a href=\"#git-flow\">Git Flow</a></li>\n<li><a href=\"#github-flow\">GitHub Flow</a></li>\n<li><a href=\"#%E6%8F%90%E4%BA%A4%E7%A8%8B%E5%BC%8F%E7%A2%BC-pull-reqeust\">提交程式碼 (Pull Reqeust)</a></li>\n<li><a href=\"#%E7%A8%8B%E5%BC%8F%E7%A2%BC%E5%AF%A9%E6%9F%A5-code-review\">程式碼審查 (Code Review)</a></li>\n<li><a href=\"#linter-%E5%8F%83%E8%88%87%E7%A8%8B%E5%BC%8F%E7%A2%BC%E5%AF%A9%E6%9F%A5\">Linter 參與程式碼審查</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%A8%8B%E5%BC%8F%E7%A2%BC%E6%9B%B4%E5%81%A5%E5%BA%B7%EF%BC%9F\">如何使程式碼更健康？</a></p>\n<ul>\n<li><a href=\"#%E8%A4%87%E9%9B%9C%E7%9A%84%E7%B3%BB%E7%B5%B1\">複雜的系統</a></li>\n<li><a href=\"#%E7%9C%9F%E7%9A%84%E4%B8%8D%E8%80%83%E6%85%AE%E5%AF%AB-unit-test-%E5%97%8E%EF%BC%9F\">真的不考慮寫 Unit Test 嗎？</a></li>\n<li><a href=\"#%E6%B8%AC%E8%A9%A6%E9%87%91%E5%AD%97%E5%A1%94-test-pyramid\">測試金字塔 (Test Pyramid)</a></li>\n<li><a href=\"#unit-test-%E8%A1%A1%E9%87%8F%E6%8C%87%E6%A8%99\">Unit Test 衡量指標</a></li>\n<li><a href=\"#code-coverage-tool\">Code Coverage Tool</a></li>\n<li><a href=\"#%E6%A0%B8%E5%BF%83%E6%96%B9%E6%B3%95-core-method\">核心方法 (Core Method)</a></li>\n<li><a href=\"#code-coverage-log\">Code Coverage Log</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E9%9D%A2%E8%87%A8%E5%A4%9A%E5%80%8B%E7%92%B0%E5%A2%83%E7%9A%84-deploy-%E6%83%85%E5%A2%83%E6%80%8E%E9%BA%BC%E5%81%9A%EF%BC%9F\">面臨多個環境的 Deploy 情境怎麼做？</a></p>\n<ul>\n<li><a href=\"#%E5%A4%9A%E5%B8%82%E5%A0%B4%E7%9A%84%E9%83%A8%E7%BD%B2\">多市場的部署</a></li>\n<li><a href=\"#%E6%8C%81%E7%BA%8C%E6%95%B4%E5%90%88%E3%80%81%E4%BA%A4%E4%BB%98-ci--cd\">持續整合、交付 (CI / CD)</a></li>\n<li><a href=\"#jenkins---build\">Jenkins - Build</a></li>\n<li><a href=\"#jenkins---deploy\">Jenkins - Deploy</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%B8%BD%E7%B5%90\">總結</a></li>\n<li><a href=\"#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99\">參考資料</a></li>\n</ul>","frontmatter":{"date":"2020/06/24","title":"91APP Backend RD 的日常","category":"Backend","tags":["CI/CD","GitFlow"],"author":"Knight Huang","authorPhoto":{"childImageSharp":{"fluid":{"src":"/static/e031711a8a750dd987c90755c202139c/0f3a1/knight.jpg","originalName":"knight.jpg"}}},"bannerPhoto":{"childImageSharp":{"fluid":{"src":"/static/25f20b4392afafd8ef065e298db82f84/ee604/Build.png","originalName":"Build.png"}}},"youtubePath":"http://www.youtube.com/watch?v=7LHXaDPVMts"},"fields":{"slug":"blog/Backend/backend-rd-routine-work"}}},"pageContext":{"slug":"blog/Backend/backend-rd-routine-work"}},"staticQueryHashes":["1351831723","63159454"]}